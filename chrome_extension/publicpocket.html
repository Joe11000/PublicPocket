<!DOCTYPE html>
<html>
  <head>
  	<title></title>
  	<script src="jquery-1.10.2.js"></script>

  	<!-- <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" /> -->
    <script src="jquery-ui-1.10.4.min.js"></script>

  	<link rel="stylesheet" type="text/css" href="publicpocket.css">
  </head>

  <body>
    <div class="container">
      <button type="button" onclick="ajax()">Save Page</button>
    </div>

    <script type="text/javascript">
      var element_1 = "<button type='button' onclick='ajax()'>Save Page</button>"
      var element_2 = "<img src='ajax-loader.gif'>"

      ajax = function()
      {
      	if($('.container > button').size() > 0)
      	  $('button').replaceWith(element_2);
      	else
      		return;

        var here = document.URL
        xhr = $.ajax({
          type: "post",
          url: "http://cors-test-101.herokuapp.com/users/",
          data: {'location': here},
          crossDomain: true,
          xhrFields: {
            withCredentials: true
          }
        })
          .done(function(){
            console.log(arguments[0])

            $('.container > img').replaceWith(element_1)
          });
      }
    </script>
  </body>
</html>

<!--
http://www.ibhomefinder.com/images/ajax-loader.gif
http://www.royalrentacar.com/images/Loading.gif
http://www.mytreedb.com/uploads/mytreedb/loader/ajax_loader_blue_350.gif -->